# 发号器规约

> 作者 张磊

## UUID

> 使用 java.util.UUID 类生成的唯一ID

```
String uuid = UUID.randomUUID().toString();
```

此种方法生成的唯一ID产生时使用完全的时间数据，性能较差，长度较长，在基于BTree索引写的时候性能较差、占用空间大

缺陷

* 缺乏有序性：无法根据ID进行排序
* 不可反解析：ID无意义不可反解析

## 基于数据库

> 基于数据库方式实现有序唯一ID，可以采用自增长字段或者定期生成ID池的方式

优点

* 具备有序性
* 支持分布式系统

缺点

* 不可恢复，当需要数据恢复或者数据清理时可能由于新的ID已经被使用，从而无法实现数据的有序性恢复或者制造

## 全局发号器

> 为了解决UUID的缺陷，可使用全局发号器类产生ID，功能规划中

优点

* 分布式部署发号器全局唯一
* 实现粗略有序性，秒级有序，毫秒级有序
* 可反解析，可以通过ID反解析出产生时间，来源等业务信息
* 高可用，可以部署成对等集群并提供发号服务
* 高性能，100并发时，内嵌方式QPS>10w，RESTful API QPS>5k



 

 